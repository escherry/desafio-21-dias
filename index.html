<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Desafio 21 Dias - Sem A√ß√∫car + Exerc√≠cio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(145deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height:100vh; color:#f8fafc; line-height:1.6;
        }
        .container { max-width:1400px; margin:0 auto; padding:24px; }
        .header { text-align:center; margin-bottom:40px; padding:40px 20px; background: linear-gradient(135deg, #1e40af 0%, #3730a3 50%, #581c87 100%); border-radius:24px; box-shadow:0 25px 50px -12px rgba(0,0,0,0.4); position:relative; overflow:hidden; }
        .header h1 { font-size:3.5rem; font-weight:800; margin-bottom:16px; background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
        .header p { font-size:1.3rem; opacity:0.9; font-weight:300; }

        .dashboard { display:grid; grid-template-columns:1fr 1fr; gap:32px; margin-bottom:40px; }
        .stats-section, .chart-section, .table-container {
            background: rgba(30,41,59,0.7); backdrop-filter: blur(20px); border:1px solid rgba(148,163,184,0.1); border-radius:20px; padding:32px;
        }
        .stats-grid { display:grid; grid-template-columns: repeat(2,1fr); gap:20px; }
        .stat-card { padding:24px; border-radius:16px; text-align:center; background: linear-gradient(145deg, rgba(59,130,246,0.05), rgba(147,51,234,0.03)); border:1px solid rgba(59,130,246,0.08); }
        .stat-value { font-size:2.8rem; font-weight:800; background: linear-gradient(135deg, #60a5fa, #a78bfa); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; margin-bottom:8px; }
        .stat-label { color:#cbd5e1; font-size:0.95rem; font-weight:500; text-transform:uppercase; letter-spacing:0.5px; }
        .chart-container { position:relative; height:280px; }

        .table-title { font-size:2rem; font-weight:700; margin-bottom:32px; text-align:center; background: linear-gradient(135deg, #60a5fa, #a78bfa); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
        .table-wrapper { overflow-x:auto; border-radius:16px; }

        table { width:100%; border-collapse:collapse; background: rgba(15,23,42,0.8); border-radius:16px; overflow:hidden; }
        th {
            background: linear-gradient(135deg, #1e40af, #3730a3); color:white; padding:20px 16px; text-align:center; font-weight:600; font-size:1rem; letter-spacing:0.5px; text-transform:uppercase;
        }
        td { padding:20px 16px; text-align:center; border-bottom:1px solid rgba(148,163,184,0.1); transition:all 0.3s ease; vertical-align:middle; }
        tr:hover td { background: rgba(59,130,246,0.03); }

        .day-cell { font-weight:700; font-size:1.1rem; background: linear-gradient(135deg, #60a5fa, #a78bfa); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
        .checkbox-container { display:flex; justify-content:center; align-items:center; gap:8px; }
        /* Input checkbox hidden, use span for visual */
        .checkbox-input { display:none; }
        .custom-checkbox {
            width:28px; height:28px; border:2px solid rgba(148,163,184,0.3); border-radius:8px; cursor:pointer; position:relative; transition:all 0.18s cubic-bezier(0.4,0,0.2,1); background: rgba(15,23,42,0.5); display:inline-block;
        }
        .custom-checkbox:hover { border-color:#60a5fa; transform:scale(1.05); box-shadow:0 0 12px rgba(96,165,250,0.12); }
        .checkbox-input:checked + .custom-checkbox {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-color: #3b82f6;
            box-shadow: 0 0 20px rgba(59,130,246,0.25);
        }
        .checkbox-input:checked + .custom-checkbox::after {
            content:'‚úì'; color:white; font-size:18px; font-weight:bold; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
        }

        .progress-cell { font-weight:600; }
        .progress-percent { font-weight:700; margin-top:8px; } /* colocado abaixo da barra */
        .progress-bar { width:120px; height:10px; background: rgba(15,23,42,0.8); border-radius:5px; margin:8px auto; overflow:hidden; border:1px solid rgba(148,163,184,0.2); }
        .progress-fill { height:100%; background: linear-gradient(90deg, #3b82f6, #8b5cf6); transition: width 0.5s cubic-bezier(0.4,0,0.2,1); border-radius:5px; }

        .observations-input {
            width:100%; min-width:200px; background: rgba(15,23,42,0.8); border:1px solid rgba(148,163,184,0.2); border-radius:8px; padding:12px 16px; color:#f8fafc; font-family:inherit; font-size:0.95rem; transition:all 0.3s ease;
        }
        .observations-input::placeholder { color:#64748b; }
        .observations-input:focus { outline:none; border-color:#60a5fa; box-shadow:0 0 0 3px rgba(96,165,250,0.08); background: rgba(15,23,42,0.95); }

        .motivational-message { text-align:center; padding:32px; background: linear-gradient(135deg, rgba(59,130,246,0.08), rgba(139,92,246,0.08)); border:1px solid rgba(59,130,246,0.12); color:#f8fafc; font-size:1.15rem; font-weight:500; margin-top:32px; border-radius:20px; backdrop-filter: blur(20px); }

        .section-title { font-size:1.5rem; font-weight:700; margin-bottom:24px; background: linear-gradient(135deg, #60a5fa, #a78bfa); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; text-align:center; }

        @media (max-width: 1024px) {
            .dashboard { grid-template-columns:1fr; gap:24px; }
            .header h1 { font-size:2.5rem; }
            .stats-grid { grid-template-columns:repeat(2,1fr); }
        }
        @media (max-width: 768px) {
            .container { padding:16px; }
            .header h1 { font-size:2rem; }
            .stats-grid { grid-template-columns:1fr; }
            .stats-section, .chart-section, .table-container { padding:24px; }
            table { font-size:0.9rem; }
            th, td { padding:12px 8px; }
            .observations-input { min-width:150px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>üéØ Desafio 21 Dias</h1>
                <p>Sem A√ß√∫car + Exerc√≠cio F√≠sico Di√°rio</p>
            </div>
        </div>

        <div class="dashboard">
            <div class="stats-section">
                <h3 class="section-title">üìä Estat√≠sticas</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalDays">21</div>
                        <div class="stat-label">Total de Dias</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completedDays">0</div>
                        <div class="stat-label">Dias Completos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="exerciseCount">0</div>
                        <div class="stat-label">Exerc√≠cios</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sugarFreeCount">0</div>
                        <div class="stat-label">Sem A√ß√∫car</div>
                    </div>
                </div>
            </div>

            <div class="chart-section">
                <h3 class="section-title">üìà Progresso Visual</h3>
                <div class="chart-container">
                    <canvas id="progressChart"></canvas>
                </div>
            </div>
        </div>

        <div class="table-container">
            <h2 class="table-title">üìÖ Acompanhamento Di√°rio</h2>
            <div class="table-wrapper">
                <table id="challengeTable">
                    <thead>
                        <tr>
                            <th>Dia</th>
                            <th>üí™ Exerc√≠cio</th>
                            <th>üö´üç≠ Sem A√ß√∫car</th>
                            <th>üìù Observa√ß√µes</th>
                            <th>üìä Progresso</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>

        <div class="motivational-message" id="motivationalMessage">
            üåü Voc√™ est√° no come√ßo de uma jornada incr√≠vel! Cada dia √© uma vit√≥ria! üåü
        </div>
    </div>

    <script>
        let challengeData = [];
        let chart = null;

        for (let i = 1; i <= 21; i++) {
            challengeData.push({
                day: i,
                exercise: false,
                sugarFree: false,
                observations: '',
                progress: 0
            });
        }

        function createTable() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';

            challengeData.forEach((dayData, index) => {
                const row = tableBody.insertRow();

                // Dia
                const dayCell = row.insertCell(0);
                dayCell.className = 'day-cell';
                dayCell.textContent = `Dia ${dayData.day}`;

                // Exerc√≠cio (apenas um checkbox)
                const exerciseCell = row.insertCell(1);
                const exerciseLabel = document.createElement('label');
                exerciseLabel.className = 'checkbox-container';
                const exerciseInput = document.createElement('input');
                exerciseInput.type = 'checkbox';
                exerciseInput.className = 'checkbox-input';
                exerciseInput.id = `exercise-${index}`;
                exerciseInput.checked = !!dayData.exercise;
                const exerciseSpan = document.createElement('span');
                exerciseSpan.className = 'custom-checkbox';
                // clicking the visual span toggles the input
                exerciseSpan.addEventListener('click', () => {
                    exerciseInput.checked = !exerciseInput.checked;
                    exerciseInput.dispatchEvent(new Event('change'));
                });
                exerciseLabel.appendChild(exerciseInput);
                exerciseLabel.appendChild(exerciseSpan);
                exerciseInput.onchange = (e) => {
                    challengeData[index].exercise = e.target.checked;
                    updateProgress(index);
                    updateStats();
                    updateChart();
                    updateMotivationalMessage();
                    createTable();
                };
                exerciseCell.appendChild(exerciseLabel);

                // Sem A√ß√∫car (apenas um checkbox)
                const sugarCell = row.insertCell(2);
                const sugarLabel = document.createElement('label');
                sugarLabel.className = 'checkbox-container';
                const sugarInput = document.createElement('input');
                sugarInput.type = 'checkbox';
                sugarInput.className = 'checkbox-input';
                sugarInput.id = `sugar-${index}`;
                sugarInput.checked = !!dayData.sugarFree;
                const sugarSpan = document.createElement('span');
                sugarSpan.className = 'custom-checkbox';
                sugarSpan.addEventListener('click', () => {
                    sugarInput.checked = !sugarInput.checked;
                    sugarInput.dispatchEvent(new Event('change'));
                });
                sugarLabel.appendChild(sugarInput);
                sugarLabel.appendChild(sugarSpan);
                sugarInput.onchange = (e) => {
                    challengeData[index].sugarFree = e.target.checked;
                    updateProgress(index);
                    updateStats();
                    updateChart();
                    updateMotivationalMessage();
                    createTable();
                };
                sugarCell.appendChild(sugarLabel);

                // Observa√ß√µes (coluna correta)
                const observationsCell = row.insertCell(3);
                const observationsInput = document.createElement('input');
                observationsInput.type = 'text';
                observationsInput.className = 'observations-input';
                observationsInput.value = dayData.observations || '';
                observationsInput.placeholder = 'Adicione suas observa√ß√µes...';
                observationsInput.onchange = (e) => {
                    challengeData[index].observations = e.target.value;
                };
                observationsCell.appendChild(observationsInput);

                // Progresso (barra em cima, porcentagem embaixo)
                const progressCell = row.insertCell(4);
                progressCell.className = 'progress-cell';
                const progressPercent = dayData.progress || 0;
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                const progressFill = document.createElement('div');
                progressFill.className = 'progress-fill';
                progressFill.style.width = `${progressPercent}%`;
                progressBar.appendChild(progressFill);
                const percentDiv = document.createElement('div');
                percentDiv.className = 'progress-percent';
                percentDiv.textContent = `${progressPercent}%`;
                progressCell.appendChild(progressBar);
                progressCell.appendChild(percentDiv);
            });
        }

        function updateProgress(dayIndex) {
            const dayData = challengeData[dayIndex];
            let completed = 0;
            if (dayData.exercise) completed += 50;
            if (dayData.sugarFree) completed += 50;
            dayData.progress = completed;
        }

        function updateStats() {
            const completedDays = challengeData.filter(day => day.progress === 100).length;
            const exerciseCount = challengeData.filter(day => day.exercise).length;
            const sugarFreeCount = challengeData.filter(day => day.sugarFree).length;

            document.getElementById('completedDays').textContent = completedDays;
            document.getElementById('exerciseCount').textContent = exerciseCount;
            document.getElementById('sugarFreeCount').textContent = sugarFreeCount;
        }

        function updateChart() {
            const completedDays = challengeData.filter(day => day.progress === 100).length;
            const partialDays = challengeData.filter(day => day.progress > 0 && day.progress < 100).length;
            const pendingDays = 21 - completedDays - partialDays;

            const ctx = document.getElementById('progressChart').getContext('2d');

            if (chart) { chart.destroy(); }

            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Dias Completos', 'Dias Parciais', 'Dias Pendentes'],
                    datasets: [{
                        data: [completedDays, partialDays, pendingDays],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(148, 163, 184, 0.3)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(139, 92, 246, 1)',
                            'rgba(148, 163, 184, 0.5)'
                        ],
                        borderWidth: 2,
                        cutout: '65%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 24,
                                usePointStyle: true,
                                font: { size:13, weight:'500' },
                                color: '#f8fafc'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed} dias`;
                                }
                            },
                            backgroundColor: 'rgba(15, 23, 42, 0.9)',
                            titleColor: '#f8fafc',
                            bodyColor: '#f8fafc',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1
                        }
                    }
                }
            });
        }

        function updateMotivationalMessage() {
            const completedDays = challengeData.filter(day => day.progress === 100).length;
            const totalProgress = (completedDays / 21) * 100;

            let message = '';

            if (totalProgress === 0) {
                message = 'üåü Voc√™ est√° no come√ßo de uma jornada incr√≠vel! Cada dia √© uma vit√≥ria! üåü';
            } else if (totalProgress <= 25) {
                message = 'üåä √ìtimo come√ßo! Voc√™ j√° est√° construindo h√°bitos saud√°veis! üåä';
            } else if (totalProgress <= 50) {
                message = 'üíé Voc√™ est√° no meio do caminho! Continue assim, voc√™ consegue! üíé';
            } else if (totalProgress <= 75) {
                message = '‚ö° Incr√≠vel! Voc√™ est√° quase l√°! Mantenha o foco! ‚ö°';
            } else if (totalProgress < 100) {
                message = 'üöÄ Voc√™ est√° quase no topo! A linha de chegada est√° pr√≥xima! üöÄ';
            } else {
                message = 'üèÜ PARAB√âNS! Voc√™ completou o desafio de 21 dias! Voc√™ √© incr√≠vel! üèÜ';
            }

            document.getElementById('motivationalMessage').textContent = message;
        }

        // Inicializa
        createTable();
        updateStats();
        updateChart();
        updateMotivationalMessage();
    </script>
</body>
</html>
